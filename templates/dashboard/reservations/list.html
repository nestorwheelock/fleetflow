{% extends 'base.html' %}

{% block title %}Reservations - FleetFlow{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Reservations</h1>
    <div class="flex space-x-2">
        <a href="/dashboard/reservations/calendar/" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
            View Calendar
        </a>
        <a href="/dashboard/reservations/create/" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            New Reservation
        </a>
    </div>
</div>

<!-- Filters -->
<div class="bg-white rounded-lg shadow p-4 mb-6">
    <form method="get" class="flex gap-4">
        <select name="status" class="border rounded px-4 py-2">
            <option value="">All Status</option>
            <option value="pending" {% if request.GET.status == 'pending' %}selected{% endif %}>Pending</option>
            <option value="confirmed" {% if request.GET.status == 'confirmed' %}selected{% endif %}>Confirmed</option>
            <option value="checked_out" {% if request.GET.status == 'checked_out' %}selected{% endif %}>Checked Out</option>
            <option value="completed" {% if request.GET.status == 'completed' %}selected{% endif %}>Completed</option>
            <option value="cancelled" {% if request.GET.status == 'cancelled' %}selected{% endif %}>Cancelled</option>
        </select>
        <button type="submit" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Filter</button>
    </form>
</div>

<!-- Reservation List -->
<div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Customer</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Vehicle</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Dates</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Total</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for res in reservations %}
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4">#{{ res.pk }}</td>
                <td class="px-6 py-4">{{ res.customer }}</td>
                <td class="px-6 py-4">{{ res.vehicle }}</td>
                <td class="px-6 py-4">{{ res.start_date }} - {{ res.end_date }}</td>
                <td class="px-6 py-4">
                    <span class="px-2 py-1 rounded text-xs font-medium
                        {% if res.status == 'confirmed' %}bg-blue-100 text-blue-800
                        {% elif res.status == 'pending' %}bg-yellow-100 text-yellow-800
                        {% elif res.status == 'checked_out' %}bg-green-100 text-green-800
                        {% elif res.status == 'completed' %}bg-gray-100 text-gray-800
                        {% elif res.status == 'cancelled' %}bg-red-100 text-red-800
                        {% else %}bg-gray-100 text-gray-800{% endif %}">
                        {{ res.get_status_display }}
                    </span>
                </td>
                <td class="px-6 py-4">${{ res.total_amount }}</td>
                <td class="px-6 py-4">
                    <a href="/dashboard/reservations/{{ res.pk }}/" class="text-blue-600 hover:underline">View</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="px-6 py-4 text-center text-gray-500">No reservations found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
